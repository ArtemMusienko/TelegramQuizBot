# Telegram Quiz Bot

Этот бот позволяет пользователям проходить викторину с вопросами и вариантами ответов. Бот сохраняет результаты и предоставляет статистику.

## **Команды бота**

1. */start*: Запускает бота и показывает приветственное сообщение с кнопкой для начала викторины. Пример использования */start*:

**Ответ бота:** Добро пожаловать на квиз! Для старта нажмите на кнопку 'Начать квиз'!

  2. */quiz* или кнопка "*Начать квиз*". Начинает новую викторину. Бот задает вопросы по очереди и проверяет ответы пользователя. Пример использования */quiz*:

**Ответ бота:** Давайте начнем квиз! Всего будет 10 вопросов.

3. Ответ на вопросы. После начала викторины бот отправляет вопросы с вариантами ответов. Пользователь выбирает ответ, нажимая на *inline-кнопку*. Пример вопроса:

 **Что такое Python?**

[ Язык программирования ]

[ Фреймворк ]

[ Иностранный язык ]

[ Викторина ]

**Ответ бота после выбора**: Вы выбрали: Язык программирования. Верно!
	или 
	Вы выбрали: Фреймворк. Неправильно. Правильный ответ: Язык программирования

4. **Завершение викторины**

Когда все вопросы пройдены, бот выводит результат. 

**Пример ответа бота**: Это был последний вопрос. Квиз завершен! Ваш результат: 8/10

## Как работает бот ?

**База данных**: Бот использует *SQLite* для хранения данных. Текущий прогресс пользователя (*quiz_state*). Ответы пользователя (*quiz_answers*). Результаты викторины (*quiz_results*).

**Структура базы данных**:

 -   **`quiz_state`**:
    
    -   `user_id`  (INTEGER, PRIMARY KEY): ID пользователя.
        
    -   `question_index`  (INTEGER): Индекс текущего вопроса.
        
 -   **`quiz_answers`**:
    
    -   `user_id`  (INTEGER): ID пользователя.
        
    -   `question_index`  (INTEGER): Индекс вопроса.
        
    -   `is_correct`  (INTEGER): Правильность ответа (1 — правильный, 0 — неправильный).
        
 -   **`quiz_results`**:
    
    -   `user_id`  (INTEGER, PRIMARY KEY): ID пользователя.
        
    -   `score`  (INTEGER): Количество правильных ответов.
        
    -   `last_played`  (TEXT): Дата и время последнего прохождения.

**Вопросы**: Вопросы и варианты ответов хранятся в списке *quiz_data*. Каждый вопрос содержит: текст вопроса, варианты ответов, индекс правильного ответа.

**Обработка ответов**: Бот проверяет правильность ответа и сохраняет результат. Если ответ неправильный, бот показывает правильный вариант.

**Статистика**: После завершения викторины бот сохраняет общий результат и выводит его пользователю.

**Список функций и их краткое описание**:

 - generate_options_keyboard - Генерация клавиатуры с вариантами ответов;
 - get_quiz_index - Получение текущего индекса вопроса;
 - update_quiz_index - Обновление индекса вопроса;
 - save_user_answer - Сохранение ответа пользователя;
 - calculate_score - Подсчет правильных ответов;
 - save_quiz_result - Сохранение результата квиза;
 - get_question - Получение текущего вопроса;
 - handle_answer - Обрабатывает ответ пользователя;
 - cmd_start - Обрабатывает команду `/start`;
 - cmd_quiz - Обрабатывает команду `/quiz` или нажатие кнопки "Начать квиз";
 - create_table - Создает таблицы в базе данных, если они еще не существуют;
 - new_quiz - Начинает новую викторину для пользователя;
 - main - Запускает бота.

**Установка и запуск**: Установите зависимости: *pip install aiogram aiosqlite*. Добавьте токен вашего бота: *API_TOKEN = 'ВАШ_ТОКЕН'*